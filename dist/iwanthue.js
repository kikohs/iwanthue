var IWantHue=function(){"use strict";function t(t){var r,e;t||(r=0,e=Math.pow(2,31)-1,t=r+Math.floor(Math.random()*(e-r+1))),this.seed=t%2147483647,this.seed<=0&&(this.seed+=2147483646)}t.prototype.next=function(){return this.seed=16807*this.seed%2147483647,this.seed},t.prototype.nextFloat=function(){return(this.next()-1)/2147483646};var r=t,e={},n={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452};function o(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function i(t){return t>n.t3?Math.pow(t,1/3):t/n.t2+n.t0}function c(t){return t>n.t1?t*t*t:n.t2*(t-n.t0)}function l(t){var r=t[0],e=t[1],a=t[2],i=(r+16)/116,l=isNaN(e)?i:i+e/500,u=isNaN(a)?i:i-a/200;return i=n.Yn*c(i),[o(3.2404542*(l=n.Xn*c(l))-1.5371385*i-.4985314*(u=n.Zn*c(u))),o(-.969266*l+1.8760108*i+.041556*u),a=o(.0556434*l-.2040259*i+1.0572252*u)]}function u(t){return("0"+t.toString(16)).slice(-2)}var h=180/Math.PI;e.validateRgb=function(t){var r=t[0],e=t[1],n=t[2];return r>=0&&r<=255&&e>=0&&e<=255&&n>=0&&n<=255},e.labToRgb=l,e.labToRgbHex=function(t){var r=l(t);return"#"+u(r[0])+u(r[1])+u(r[2])},e.rgbToLab=function(t){var r=function(t){var r=t[0],e=t[1],o=t[2];return[i((.4124564*(r=a(r))+.3575761*(e=a(e))+.1804375*(o=a(o)))/n.Xn),i((.2126729*r+.7151522*e+.072175*o)/n.Yn),i((.0193339*r+.119192*e+.9503041*o)/n.Zn)]}(t),e=r[0],o=r[1],c=116*o-16;return[c<0?0:c,500*(e-o),200*(o-r[2])]},e.labToHcl=function(t){var r=t[0],e=t[1],n=t[2],o=Math.sqrt(e*e+n*n),a=(Math.atan2(n,e)*h+360)%360;return 0===Math.round(1e4*o)&&(a=NaN),[a,o,r]},e.diffSort=function(t,r){for(var e,n,o,a,i,c,l=[(r=r.slice()).shift()];r.length>0;){for(e=-1,n=-1/0,o=0;o<r.length;o++)for(a=r[o],c=0;c<l.length;c++)(i=t(a,l[c]))>n&&(n=i,e=o);l.push(r[e]),r.splice(e,1)}return l},e.computeQualityMetrics=function(t,r){var e,n,o,a,i=1/0,c=0,l=0;for(e=0,o=r.length;e<o;e++)for(n=e+1;n<o;n++)(a=t(r[e],r[n]))<i&&(i=a),c+=a,l++;return{min:i,mean:c/l}};var s=e,p={protanope:{x:.7465,y:.2535,m:1.273463,yint:-.073894},deuteranope:{x:1.4,y:-.4,m:.968437,yint:.003331},tritanope:{x:.1748,y:0,m:.062921,yint:.292119}};function f(){this.cache={}}f.prototype.simulate=function(t,r,e){e=e||1;var n=t.join("-")+"-"+r+"-"+e,o=this.cache[n];if(o)return o;var a=p[r].x,i=p[r].y,c=p[r].m,l=p[r].yint,u=s.labToRgb(t),h=u[0],f=u[1],d=u[2],w=h,m=f,M=d,b=Math.pow(h,2.2),g=Math.pow(f,2.2),y=Math.pow(d,2.2),v=.412424*b+.357579*g+.180464*y,x=.212656*b+.715158*g+.0721856*y,S=.0193324*b+.119193*g+.950444*y,E=v/(v+x+S),q=x/(v+x+S),N=(q-i)/(E-a),F=q-E*N,T=(l-F)/(N-c),k=N*T+F,R=.312713*x/.329016-(v=T*x/k),P=.358271*x/.329016-(S=(1-(T+k))*x/k),A=3.24071*R+-.498571*P,H=-.969258*R+.0415557*P,j=.0556352*R+1.05707*P,I=(((w=3.24071*v+-1.53726*x+-.498571*S)<0?0:1)-w)/A,O=(((m=-.969258*v+1.87599*x+.0415557*S)<0?0:1)-m)/H,X=(((M=.0556352*v+-.203996*x+1.05707*S)<0?0:1)-M)/j,Y=Math.max(I>1||I<0?0:I,O>1||O<0?0:O,X>1||X<0?0:X);w+=Y*A,m+=Y*H,M+=Y*j;var Z=[w=h*(1-e)+(w=Math.pow(w,1/2.2))*e,m=f*(1-e)+(m=Math.pow(m,1/2.2))*e,M=d*(1-e)+(M=Math.pow(M,1/2.2))*e],L=s.rgbToLab(Z);return this.cache[n]=L,L},f.prototype.euclidean=function(t,r){return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2)+Math.pow(t[2]-r[2],2))},f.prototype.cmc=function(t,r,e,n){for(var o=e[0],a=n[0],i=e[1],c=n[1],l=e[2],u=n[2],h=Math.sqrt(Math.pow(i,2)+Math.pow(l,2)),s=h-Math.sqrt(Math.pow(c,2)+Math.pow(u,2)),p=o-a,f=i-c,d=l-u,w=Math.sqrt(Math.pow(f,2)+Math.pow(d,2)+Math.pow(s,2)),m=Math.atan2(l,i)*(180/Math.PI);m<0;)m+=360;var M=Math.sqrt(Math.pow(h,4)/(Math.pow(h,4)+1900)),b=m>=164&&m<=345?.56+Math.abs(.2*Math.cos(m+168)):.36+Math.abs(.4*Math.cos(m+35)),g=e[0]<16?.511:.040975*o/(1+.01765*o),y=.0638*h/(1+.0131*h)+.638,v=y*(M*b+1-M);return Math.sqrt(Math.pow(p/(t*g),2)+Math.pow(s/(r*y),2)+Math.pow(w/v,2))}.bind(null,2,1),f.prototype.colorblind=function(t,r,e){return r=this.simulate(r,t),e=this.simulate(e,t),this.cmc(r,e)},Object.keys(p).forEach((function(t){f.prototype[t]=function(r,e){return this.colorblind(t,r,e)}}));f.prototype.compromise=function(t,r){var e=0,n=this.cmc(t,r);return e+=1e3*n,n=this.colorblind("protanope",t,r),isNaN(n)||(e+=100*n),n=this.colorblind("deuteranope",t,r),isNaN(n)||(e+=500*n),n=this.colorblind("tritanope",t,r),isNaN(n)||(e+=1*n),e/1601},f.prototype.get=function(t){return t in p?this.colorblind.bind(this,t):this[t].bind(this)};var d=r,w=f,m=e,M={all:[0,360,0,100,0,100],default:[0,360,30,80,35,80],sensible:[0,360,25.59,55.59,60.94,90.94],colorblind:[0,360,40,70,15,85],"fancy-light":[0,360,15,40,70,100],"fancy-dark":[0,360,8,40,7,40],shades:[0,240,0,15,0,100],tarnish:[0,360,0,15,30,70],pastel:[0,360,0,30,70,100],pimp:[0,360,30,100,25,70],intense:[0,360,20,100,15,80],fluo:[0,300,35,100,75,100],"red-roses":[330,20,10,100,35,100],"ochre-sand":[20,60,20,50,35,100],"yellow-lime":[60,90,10,100,35,100],"green-mint":[90,150,10,100,35,100],"ice-cube":[150,200,0,100,35,100],"blue-ocean":[220,260,8,80,0,50],"indigo-night":[260,290,40,100,35,100],"purple-wine":[290,330,0,100,0,40]},b=m.validateRgb,g=m.labToRgb,y=m.labToRgbHex,v=m.labToHcl,x=m.diffSort,S={attempts:1,colorFilter:null,colorSpace:"default",clustering:"k-means",quality:50,ultraPrecision:!1,distance:"euclidean",seed:null},E=new Set(["force-vector","k-means"]),q=new Set(["euclidean","cmc","compromise","protanope","deuteranope","tritanope"]),N=new Set(Object.keys(M));function F(t,r,e){for(var n,o,a=new Array(r),i=0;i<r;i++){do{n=[100*t(),100*(2*t()-1),100*(2*t()-1)],o=g(n)}while(!e(o,n));a[i]=n}return a}function T(t,r,e,n,o){for(var a,i,c,l,u,h,s,p,f,d,w,m,M,b=new Array(n.length),y=20*o.quality,v=n.length;y-- >0;){for(a=0;a<v;a++)b[a]={dl:0,da:0,db:0};for(a=0;a<v;a++)for(c=n[a],i=0;i<a;i++)(u=r(c,l=n[i]))>0?(h=c[0]-l[0],s=c[1]-l[1],p=c[2]-l[2],f=100/Math.pow(u,2),b[a].dl+=h*f/u,b[a].da+=s*f/u,b[a].db+=p*f/u,b[i].dl-=h*f/u,b[i].da-=s*f/u,b[i].db-=p*f/u):(b[i].dl+=2-4*t(),b[i].da+=2-4*t(),b[i].db+=2-4*t());for(a=0;a<v;a++)w=n[a],(M=100*Math.sqrt(Math.pow(b[a].dl,2)+Math.pow(b[a].da,2)+Math.pow(b[a].db,2)))>0&&(m=100*Math.min(.1,M)/M,d=[w[0]+b[a].dl*m,w[1]+b[a].da*m,w[2]+b[a].db*m],e(g(d),d)&&(n[a]=d))}}function k(t,r,e,n){var o,a,i,c,l=[],u=[],h=5,s=10,p=10;for(n.ultraPrecision&&(h=1,s=5,p=5),o=0;o<=100;o+=h)for(a=-100;a<=100;a+=s)for(i=-100;i<=100;i+=p)r(g(c=[o,a,i]),c)&&(l.push(c),u.push(null));for(var f,d,w,m,M,b,y,v,x,S=n.quality,E=l.length,q=e.length;S-- >0;){for(f=0;f<E;f++)for(w=l[f],M=1/0,d=0;d<q;d++)(m=t(e[d],w))<M&&(M=m,u[f]=d);for(b=l.slice(),d=0;d<q;d++){for(y=0,v=[0,0,0],f=0;f<E;f++)u[f]===d&&(y++,v[0]+=l[f][0],v[1]+=l[f][1],v[2]+=l[f][2]);if(0!==y)if(v[0]/=y,v[1]/=y,v[2]/=y,r(g(v),v))e[d]=v;else{if(b.length>0){for(M=1/0,x=-1,f=0;f<b.length;f++)(m=t(b[f],v))<M&&(M=m,x=f);e[d]=l[x]}else{for(M=1/0,x=-1,f=0;f<l.length;f++)(m=t(l[f],v))<M&&(M=m,x=f);e[d]=l[x]}b=b.filter((function(t){return t[0]!==e[d][0]||t[1]!==e[d][1]||t[2]!==e[d][2]}))}}}return e}return function(t,r){if("number"!=typeof t||t<1)throw new Error("iwanthue: expecting a color count > 1.");r=function(t){var r=Object.assign({},S,t);if("number"!=typeof r.attempts||r.attempts<=0)throw new Error("iwanthue: invalid `attempts` setting. Expecting a positive number.");if(r.colorFilter&&"function"!=typeof r.colorFilter)throw new Error("iwanthue: invalid `colorFilter` setting. Expecting a function.");if(!E.has(r.clustering))throw new Error('iwanthue: unknown `clustering` "'+r.clustering+'".');if("number"!=typeof r.quality||isNaN(r.quality)||r.quality<1)throw new Error("iwanthue: invalid `quality`. Expecting a number > 0.");if("boolean"!=typeof r.ultraPrecision)throw new Error("iwanthue: invalid `ultraPrecision`. Expecting a boolean.");if(!q.has(r.distance))throw new Error('iwanthue: unknown `distance` "'+r.distance+'".');if("string"==typeof r.seed&&(r.seed=function(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t.charCodeAt(e);return r}(r.seed)),null!==r.seed&&"number"!=typeof r.seed)throw new Error("iwanthue: invalid `seed`. Expecting an integer or a string.");if(!r.colorFilter&&r.colorSpace&&"all"!==r.colorSpace){var e;if("string"==typeof r.colorSpace){if(!N.has(r.colorSpace))throw new Error('iwanthue: unknown `colorSpace` "'+r.colorSpace+'".');e=M[r.colorSpace]}else if(Array.isArray(r.colorSpace)){if(6!==r.colorSpace.length)throw new Error("iwanthue: expecting a `colorSpace` array of length 6 ([hmin, hmax, cmin, cmax, lmin, lmax]).");e=r.colorSpace}else e=[r.colorSpace.hmin||0,r.colorSpace.hmax||360,r.colorSpace.cmin||0,r.colorSpace.cmax||100,r.colorSpace.lmin||0,r.colorSpace.lmax||100];e[0]<e[1]?r.colorFilter=function(t,r){var n=v(r);return n[0]>=e[0]&&n[0]<=e[1]&&n[1]>=e[2]&&n[1]<=e[3]&&n[2]>=e[4]&&n[2]<=e[5]}:r.colorFilter=function(t,r){var n=v(r);return(n[0]>=e[0]||n[0]<=e[1])&&n[1]>=e[2]&&n[1]<=e[3]&&n[2]>=e[4]&&n[2]<=e[5]}}return r}(r);var e,n=new d(r.seed),o=function(){return n.nextFloat()},a=(new w).get(r.distance),i=function(t,e){return!!b(t)&&(!r.colorFilter||!!r.colorFilter(t,e))};if(1===t)return e=F(o,t,i),[y(e[0])];for(var c,l,u=r.attempts,h=-1/0;u>0;)e=F(o,t,i),"force-vector"===r.clustering?T(o,a,i,e,r):k(a,i,e,r),(c=m.computeQualityMetrics(a,e)).min>h&&(h=c.min,l=e),u--;return(e=x(a,e=l)).map(y)}}();
